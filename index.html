<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TicTacToe</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div class="container">
    <div id="first" class="field" onclick="first()"></div>
    <div id="second" onclick="second()" class="field"></div>
    <div id="third" onclick="third()" class="field"></div>
    <div style="clear:both;"></div>

    <div id="fourth" onclick="fourth()" class="field"></div>
    <div id="fifth" onclick="fifth()" class="field"></div>
    <div id="sixth" onclick="sixth()" class="field"></div>
    <div style="clear:both;"></div>

    <div id="seventh" onclick="seventh()" class="field"></div>
    <div id="eighth" onclick="eight()" class="field"></div>
    <div id="ninth" onclick="ninth()" class="field"></div>
    <div style="clear:both;"></div>
    <button onClick="console.log('zaczyna kolko')">Start</button>
</div>

<script>
    var isFieldFull = [false, false, false, false, false, false, false, false, false];
    var playersMoves = [false, false, false, false, false, false, false, false, false];

    var crossIcon = document.createElement("img");
    crossIcon.src = "cross.png";

    var pluralForms = ["first", "second", "third", "fourth", "fifth", "sixth", "seventh", "eighth", "ninth"];

    function checkIfPlayerWins() {
        if(playersMoves[0] && playersMoves[1] && playersMoves[2]) {
            console.log("Gracz wygrywa!");
            for (var n in isFieldFull) {
                isFieldFull[n] = true;
            }for (var i in isFieldFull) {
                isFieldFull[i] = true;
            }
        }
    }

    function setComputersMove(number, fieldIndex) {
        var crossIcon = document.createElement("img");
        crossIcon.src = "cross.png";
        var index = document.getElementById(fieldIndex);
        index.appendChild(crossIcon);
        isFieldFull[number] = true;
    }
    function computerMove() { //TODO losowac z kolekcji pustych pol, a nie ze wszystkich
        while (true) {
            var number = Math.floor(Math.random() * 9);
            console.log(number);
            if (!isFieldFull[number]) {
                setComputersMove(number, pluralForms[number]);
                break;
            }
        }
    }

    function first() {
        if (isFieldFull[0] == false) {
            var circleIcon = document.createElement("img");
            circleIcon.src = "circle.png";
            var src = document.getElementById("first");
            src.appendChild(circleIcon);
            isFieldFull[0] = true;
            playersMoves[0] = true;
            checkIfPlayerWins();
            computerMove();
        }
        else {
            console.log("Postawiles juz tutaj");
        }
    }

    function second() {
        if (isFieldFull[1] == false) {
            var src = document.getElementById("second");
            var circleIcon = document.createElement("img");
            circleIcon.src = "circle.png";
            src.appendChild(circleIcon);
            isFieldFull[1] = true;
            playersMoves[1] = true;
            checkIfPlayerWins();
            computerMove();
        }
        else {
            console.log("Postawiles juz tutaj");
        }
    }

    function third() {
        if (isFieldFull[2] == false) {
            var circleIcon = document.createElement("img");
            circleIcon.src = "circle.png";
            var src = document.getElementById("third");
            src.appendChild(circleIcon);
            isFieldFull[2] = true;
            playersMoves[2] = true;
            checkIfPlayerWins();
            computerMove();
        }
        else {
            console.log("Postawiles juz tutaj");
        }
    }

    function fourth() {
        if (isFieldFull[3] == false) {
            var circleIcon = document.createElement("img");
            circleIcon.src = "circle.png";
            var src = document.getElementById("fourth");
            src.appendChild(circleIcon);
            isFieldFull[3] = true;
            playersMoves[3] = true;
            checkIfPlayerWins();
            computerMove();
        }
        else {
            console.log("Postawiles juz tutaj");
        }
    }

    function fifth() {
        if (isFieldFull[4] == false) {
            var circleIcon = document.createElement("img");
            circleIcon.src = "circle.png";
            var src = document.getElementById("fifth");
            src.appendChild(circleIcon);
            isFieldFull[4] = true;
            playersMoves[4] = true;
            computerMove();
        }
        else {
            console.log("Postawiles juz tutaj");
        }
    }

    function sixth() {
        if (isFieldFull[5] == false) {
            var circleIcon = document.createElement("img");
            circleIcon.src = "circle.png";
            var src = document.getElementById("sixth");
            src.appendChild(circleIcon);
            isFieldFull[5] = true;
            playersMoves[5] = true;
            computerMove();
        }
        else {
            console.log("Postawiles juz tutaj");
        }
    }

    function seventh() {
        if (isFieldFull[6] == false) {
            var circleIcon = document.createElement("img");
            circleIcon.src = "circle.png";
            var src = document.getElementById("seventh");
            src.appendChild(circleIcon);
            isFieldFull[6] = true;
            playersMoves[6] = true;
            computerMove();
        }
        else {
            console.log("Postawiles juz tutaj");
        }
    }

    function eight() {
        if (isFieldFull[7] == false) {
            var circleIcon = document.createElement("img");
            circleIcon.src = "circle.png";
            var src = document.getElementById("eighth");
            src.appendChild(circleIcon);
            isFieldFull[7] = true;
            playersMoves[7] = true;
            computerMove();
        }
        else {
            console.log("Postawiles juz tutaj");
        }
    }

    function ninth() {
        if (isFieldFull[8] == false) {
            var circleIcon = document.createElement("img");
            circleIcon.src = "circle.png";
            var src = document.getElementById("ninth");
            src.appendChild(circleIcon);
            isFieldFull[8] = true;
            playersMoves[8] = true;
            computerMove();
        }
        else {
            console.log("Postawiles juz tutaj");
        }
    }


</script>
</body>
</html>