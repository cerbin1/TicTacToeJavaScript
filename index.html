<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TicTacToe</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div class="container">
    <div id="first" class="field" onclick="first()"></div>
    <div id="second" onclick="second()" class="field"></div>
    <div id="third" onclick="third()" class="field"></div>
    <div style="clear:both;"></div>

    <div id="fourth" onclick="fourth()" class="field"></div>
    <div id="fifth" onclick="fifth()" class="field"></div>
    <div id="sixth" onclick="sixth()" class="field"></div>
    <div style="clear:both;"></div>

    <div id="seventh" onclick="seventh()" class="field"></div>
    <div id="eighth" onclick="eighth()" class="field"></div>
    <div id="ninth" onclick="ninth()" class="field"></div>
    <div style="clear:both;"></div>
</div>

<script>
    var isFieldFull = [false, false, false, false, false, false, false, false, false];
    var playersMoves = [false, false, false, false, false, false, false, false, false];
    var computerMoves = [false, false, false, false, false, false, false, false, false];

    var numberOfMoves = 0;
    var isGameOver = false;

    var crossIcon = document.createElement("img");
    crossIcon.src = "cross.png";

    var pluralForms = ["first", "second", "third", "fourth", "fifth", "sixth", "seventh", "eighth", "ninth"];

    function checkIfSomeoneWins(array, string) {
        if ((array[0] && array[1] && array[2]) ||
                (array[3] && array[4] && array[5]) ||
                (array[6] && array[7] && array[8]) ||
                (array[0] && array[3] && array[6]) ||
                (array[1] && array[4] && array[7]) ||
                (array[2] && array[5] && array[8]) ||
                (array[0] && array[4] && array[8]) ||
                (array[2] && array[4] && array[6])) {
            console.log(string + " wygrywa!");
            isGameOver = true;
            for (var n in isFieldFull) {
                isFieldFull[n] = true;
            }
        }
        else if (numberOfMoves == 9) {
            for (var h in isFieldFull) {
                isFieldFull[h] = true;
                isGameOver = true;
            }
            console.log("Remis");
        }
    }

/*    function checkIfPlayerWins() {
        if ((playersMoves[0] && playersMoves[1] && playersMoves[2]) ||
                (playersMoves[3] && playersMoves[4] && playersMoves[5]) ||
                (playersMoves[6] && playersMoves[7] && playersMoves[8]) ||
                (playersMoves[0] && playersMoves[3] && playersMoves[6]) ||
                (playersMoves[1] && playersMoves[4] && playersMoves[7]) ||
                (playersMoves[2] && playersMoves[5] && playersMoves[8]) ||
                (playersMoves[0] && playersMoves[4] && playersMoves[8]) ||
                (playersMoves[2] && playersMoves[4] && playersMoves[6])) {
            console.log("Gracz wygrywa!");
            isGameOver = true;
            for (var n in isFieldFull) {
                isFieldFull[n] = true;
            }
        }
        else if (numberOfMoves == 9) {
            for (var h in isFieldFull) {
                isFieldFull[h] = true;
                isGameOver = true;
            }
            console.log("Remis");
        }
    }*/

/*    function checkIfComputerWins() {
        if ((computerMoves[0] && computerMoves[1] && computerMoves[2]) ||
                (computerMoves[3] && computerMoves[4] && computerMoves[5]) ||
                (computerMoves[6] && computerMoves[7] && computerMoves[8]) ||
                (computerMoves[0] && computerMoves[3] && computerMoves[6]) ||
                (computerMoves[1] && computerMoves[4] && computerMoves[7]) ||
                (computerMoves[2] && computerMoves[5] && computerMoves[8]) ||
                (computerMoves[0] && computerMoves[4] && computerMoves[8]) ||
                (computerMoves[2] && computerMoves[4] && computerMoves[6])) {
            console.log("komputer wygrywa!");
            isGameOver = true;
            for (var n in isFieldFull) {
                isFieldFull[n] = true;
            }
        }
        else if (numberOfMoves == 9) {
            for (var h in isFieldFull) {
                isFieldFull[h] = true;
            }
            isGameOver = true;
            console.log("Remis");
        }
    }*/

    function setComputersMove(number, fieldIndex) {
        var crossIcon = document.createElement("img");
        crossIcon.src = "cross.png";
        var index = document.getElementById(fieldIndex);
        index.appendChild(crossIcon);
        isFieldFull[number] = true;
        computerMoves[number] = true;
    }

    function computerMove() { //TODO losowac z kolekcji pustych pol, a nie ze wszystkich
        while (true) {
            if (!isGameOver) {
                var number = Math.floor(Math.random() * 9);
                console.log(number);
                if (!isFieldFull[number]) {
                    setComputersMove(number, pluralForms[number]);
                    numberOfMoves++;
                    console.log("liczba ruchow komp: " + numberOfMoves);
                    checkIfSomeoneWins(computerMoves, "komputer");
                    break;
                }
            }
            else {
                console.log("Nie da sie juz postawic ruchu komputerze!");
                break;
            }
        }
    }

    function setPlayersMove(number, indexOfField) {
        if (isFieldFull[number] == false) {
            var circleIcon = document.createElement("img");
            circleIcon.src = "circle.png";
            var src = document.getElementById(indexOfField);
            src.appendChild(circleIcon);
            isFieldFull[number] = true;
            playersMoves[number] = true;
            numberOfMoves++;
            console.log("liczba ruchow gracz: " + numberOfMoves);
            checkIfSomeoneWins(playersMoves, "Gracz");
            computerMove();
        }
        else {
            console.log("Postawiles juz tutaj");
        }
    }
    function first() {
        setPlayersMove(0, "first");
    }

    function second() {
        setPlayersMove(1, "second");
    }

    function third() {
        setPlayersMove(2, "third");
    }

    function fourth() {
        setPlayersMove(3, "fourth");
    }

    function fifth() {
        setPlayersMove(4, "fifth");
    }

    function sixth() {
        setPlayersMove(5, "sixth");
    }

    function seventh() {
        setPlayersMove(6, "seventh");
    }

    function eighth() {
        setPlayersMove(7, "eighth");
    }

    function ninth() {
        setPlayersMove(8, "ninth");
    }

</script>
</body>
</html>